# Project State

## Project Summary

**Building:** Local install support for OpenCode - refactor commands to work with both global (`~/.config/opencode/`) and local (`.opencode/`) installations.

**Core requirements:**
- OpenCode commands work with local `.opencode/` installs
- Installer correctly replaces paths based on install location
- No hardcoded global paths in OpenCode commands

**Constraints:**
- Must maintain backward compatibility with global installs
- Follow existing GSD command/workflow/template patterns

## Current Position

Phase: 1 of 1 (Local Install Support)
Plan: In progress
Status: Active
Last activity: 2026-01-17 - Fixed installer path replacement for OpenCode

Progress: ██████████░░░░░░░░░░░░░░ ~40%

## Performance Metrics

**Velocity:**
- Total plans completed: 23
- Average duration: 3.7 min
- Total execution time: 85 min

**By Phase:**

| Phase | Plans | Total | Avg/Plan |
|-------|-------|-------|----------|
| 1 | 3 | 9 min | 3 min |
| 2 | 2 | 5 min | 2.5 min |
| 3 | 1 | 2 min | 2 min |
| 4 | 2 | 7 min | 3.5 min |
| 5 | 2 | 5 min | 2.5 min |
| 6 | 2 | 4 min | 2 min |
| 7 | 1 | 4 min | 4 min |
| 8 | 1 | 1 min | 1 min |
| 9 | 1 | 3 min | 3 min |
| 10 | 4 | 33 min | 8.3 min |
| 11 | 4 | 12 min | 3 min |
| 99 | 3 | 1 min | <1 min (parallel) |

**Recent Trend:**
- Last 5 plans: 11-02 (2m), 11-03 (3m), 11-04 (3m), 99-01/02/03 (<1m parallel)
- Trend: Parallel execution dramatically faster

*Updated after each plan completion*

## Accumulated Context

### Decisions Made

| Phase | Decision | Rationale |
|-------|----------|-----------|
| 0 | Folder with focused files | Easier to update incrementally than monolithic file |
| 0 | Update after plan execution | Fits existing STATE.md update pattern |
| 0 | Parallel Explore agents | Thoroughness for initial mapping |
| 0 | Selective context loading | Avoid loading irrelevant sections |
| 6 | Frontmatter with dependency graph | Enable automatic context assembly via transitive closure |
| 6 | Intelligent summary selection | Scan frontmatter, build graph, auto-select relevant phases |
| 8 | Active milestone details in ROADMAP.md | Single source of truth during development, archive only on completion |
| 9 | Phase-scoped UAT issues | Keep UAT findings tied to specific plan, not global ISSUES.md |
| 10 | git mv preserves history | Rename workflow while keeping git history intact |
| 10 | execute-plan = single, execute-phase = parallel | Clear naming for single-plan vs multi-plan execution |
| 10 | Agent-history v1.2 schema | Extended for parallel tracking, dependencies, resume support |
| 11 | Frontmatter parallelization markers | parallelizable, depends_on, files_exclusive in plan template |
| 11 | Vertical slices over workflow stages | Maximize independence when parallelization enabled |
| 11 | SUMMARY references only when needed | Avoid reflexive sequential chains |

### Deferred Issues

- **12-02: Publish command update** - Add changelog generation to gsd-publish-version.md (deferred 2026-01-17, pick up in future milestone)

### Blockers/Concerns Carried Forward

None yet.

### Roadmap Evolution

- Phase 4 added: Plan-phase optimizations (~37% context reduction target)
- Phase 5 added: TDD instructions for appropriate test-driven development
- Phase 6 added: Frontmatter and related system upgrade
- Phase 7 added: Backfill existing summaries with frontmatter
- Phase 8 added: Improve roadmap system
- Phase 9 added: Integrate verify-work (community contribution from OracleGreyBeard)
- Phase 10 added: Parallel phase execution (rename workflow, create /gsd:execute-phase with parallelization)
- Phase 11 added: Parallel-aware planning (update plan-phase.md to create parallelizable plans when enabled)
- Phase 12 added: Changelog & update awareness (remote changelog fetch, /gsd:whats-new, publish workflow integration)

## Project Alignment

Last checked: Project start
Status: ✓ Aligned
Assessment: No work done yet - baseline alignment.
Drift notes: None

## Session Continuity

Last session: 2026-01-17
Stopped at: Deferred 12-02, milestone work paused
Resume file: None
Note: Remaining brownfield work (Phases 1-3) and 12-02 tabled for future milestone
